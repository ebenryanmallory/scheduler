# Story 3.1: Mobile-Optimized Layouts

## Status
**Ready for Dev**

## Story

**As a** mobile user,
**I want** a responsive interface optimized for small screens,
**so that** I can manage my tasks effectively on my phone.

## Acceptance Criteria

1. All components shall be responsive with breakpoints for mobile (<640px), tablet (640-1024px), and desktop (>1024px)
2. The mobile layout shall use collapsible sections to maximize screen space
3. Time block selection shall be touch-friendly with larger tap targets (minimum 44x44px)
4. The system shall implement bottom sheet modals for mobile instead of centered modals
5. The system shall provide a mobile navigation menu (hamburger or bottom nav)
6. The system shall implement swipe gestures for navigation (swipe left/right between views)
7. The system shall use mobile-first CSS approach with Tailwind utilities
8. The system shall test on iOS Safari, Android Chrome, and various screen sizes
9. The system shall hide non-essential UI elements on mobile to reduce clutter
10. The system shall support landscape and portrait orientations
11. The system shall prevent horizontal scrolling on mobile devices

## Tasks / Subtasks

- [ ] **Task 1: Audit and Fix Current Responsive Breakpoints** (AC: 1, 7, 11)
  - [ ] Review all existing components for mobile responsiveness
  - [ ] Add/fix Tailwind responsive classes (`sm:`, `md:`, `lg:`)
  - [ ] Ensure no horizontal overflow on any screen size
  - [ ] Test and fix grid layouts (Analytics widgets, Schedule view)
  - [ ] Add viewport meta tag validation

- [ ] **Task 2: Implement Collapsible Sections** (AC: 2, 9)
  - [ ] Create `CollapsibleSection` component with animation
  - [ ] Add collapse state persistence to localStorage
  - [ ] Make TimeBlocksPanel collapsible on mobile
  - [ ] Make Analytics widgets collapsible on mobile
  - [ ] Auto-collapse less important sections on mobile by default
  - [ ] Add expand/collapse all toggle

- [ ] **Task 3: Increase Touch Targets** (AC: 3)
  - [ ] Audit all interactive elements for tap target size
  - [ ] Increase button sizes to min 44x44px on mobile
  - [ ] Add touch padding to checkbox/radio elements
  - [ ] Increase spacing between clickable items
  - [ ] Make time block slots larger on touch devices

- [ ] **Task 4: Implement Bottom Sheet Modals** (AC: 4)
  - [ ] Install or create BottomSheet component (consider vaul or custom)
  - [ ] Create `useResponsiveModal` hook to switch modal type
  - [ ] Convert CreateTaskDialog to use bottom sheet on mobile
  - [ ] Convert EditTaskDialog to use bottom sheet on mobile
  - [ ] Add swipe-to-dismiss gesture
  - [ ] Ensure keyboard doesn't break bottom sheet on iOS

- [ ] **Task 5: Implement Mobile Navigation** (AC: 5, 6)
  - [ ] Create mobile bottom navigation bar
  - [ ] Add icons and labels for: Today, Tasks, Calendar, Settings
  - [ ] Implement hamburger menu for additional options
  - [ ] Hide desktop navigation on mobile
  - [ ] Add swipe gestures between main views (use react-swipeable)
  - [ ] Ensure navigation is accessible

- [ ] **Task 6: Optimize Mobile Layout** (AC: 9, 10)
  - [ ] Create mobile-specific layout variant
  - [ ] Stack columns vertically on mobile
  - [ ] Hide secondary widgets on mobile (move to separate view)
  - [ ] Test landscape orientation
  - [ ] Add media queries for orientation changes
  - [ ] Optimize header/footer for mobile

- [ ] **Task 7: Cross-Browser Mobile Testing** (AC: 8)
  - [ ] Test on iOS Safari (iPhone SE, iPhone 14)
  - [ ] Test on Android Chrome (various sizes)
  - [ ] Test on iPad Safari
  - [ ] Test with browser DevTools responsive mode
  - [ ] Document any browser-specific fixes applied
  - [ ] Fix any issues found

- [ ] **Task 8: Write Unit Tests**
  - [ ] Test useResponsiveModal hook
  - [ ] Test CollapsibleSection component
  - [ ] Test mobile navigation component
  - [ ] Test responsive breakpoint utilities

## Dev Notes

### Responsive Breakpoints (Tailwind defaults)
- `sm`: 640px (tablet portrait)
- `md`: 768px (tablet landscape)  
- `lg`: 1024px (desktop)
- `xl`: 1280px (large desktop)

### Mobile-First Approach
```css
/* Base styles = mobile */
.element {
  display: block; /* mobile: stacked */
}

/* Tablet and up */
@media (min-width: 640px) {
  .element {
    display: flex; /* tablet: side by side */
  }
}
```

### Touch Target Guidelines
- Minimum size: 44x44px (Apple HIG) or 48x48dp (Material)
- Minimum spacing between targets: 8px
- Important actions should be larger

### Bottom Sheet Libraries
- **vaul** (recommended): https://github.com/emilkowalski/vaul
- **react-modal-sheet**: Alternative option
- Custom: Can be built with Radix Dialog + framer-motion

### Swipe Gesture Library
- **react-swipeable**: Lightweight swipe event detection
- Install: `npm install react-swipeable`

### File Locations
- New components:
  - `src/components/mobile/BottomSheet.tsx`
  - `src/components/mobile/MobileNavigation.tsx`
  - `src/components/mobile/CollapsibleSection.tsx`
- New hooks:
  - `src/hooks/useResponsiveModal.ts`
  - `src/hooks/useMediaQuery.ts`
- Modify: Most existing components for responsive classes

### Edge Cases
- iOS Safari bottom bar overlap
- Android keyboard pushing content
- Notch/safe-area handling
- Orientation change mid-interaction
- Swipe conflicts with bottom sheet

## Testing

### Key Test Scenarios
1. Resize browser from desktop to mobile, verify layout adapts
2. Open modal on mobile, verify bottom sheet behavior
3. Swipe between views on mobile
4. Test all touch targets are easily tappable
5. Test in both portrait and landscape orientations

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-03 | 1.0 | Initial draft | Bob (SM) |

## Dev Agent Record
_To be filled by Dev Agent_

## QA Results
_To be filled by QA Agent_

